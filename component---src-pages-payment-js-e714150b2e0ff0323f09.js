(self.webpackChunknw_idolfest_website=self.webpackChunknw_idolfest_website||[]).push([[485],{61105:function(e){"use strict";e.exports=JSON.parse('{"layout":"fixed","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/d4c08/slimStarWhite.svg","srcSet":"/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/d4c08/slimStarWhite.svg 62w,\\n/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/98f22/slimStarWhite.svg 124w","sizes":"62px"},"sources":[{"srcSet":"/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/9a0be/slimStarWhite.webp 62w,\\n/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/36010/slimStarWhite.webp 124w","type":"image/webp","sizes":"62px"}]},"width":62,"height":60}')},90379:function(e){"use strict";e.exports=JSON.parse('{"layout":"fixed","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/58878/slimStarWhite.svg","srcSet":"/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/58878/slimStarWhite.svg 42w,\\n/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/4cfeb/slimStarWhite.svg 84w","sizes":"42px"},"sources":[{"srcSet":"/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/22e0b/slimStarWhite.webp 42w,\\n/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/b89b5/slimStarWhite.webp 84w","type":"image/webp","sizes":"42px"}]},"width":42,"height":40}')},95424:function(e){"use strict";e.exports=JSON.parse('{"layout":"fixed","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/dc1b9/slimStarWhite.svg","srcSet":"/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/dc1b9/slimStarWhite.svg 52w,\\n/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/3f403/slimStarWhite.svg 104w","sizes":"52px"},"sources":[{"srcSet":"/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/d1f1c/slimStarWhite.webp 52w,\\n/static/7c8a5c3cdf88ec96ac1adfd6dcb399b4/480da/slimStarWhite.webp 104w","type":"image/webp","sizes":"52px"}]},"width":52,"height":50}')},66900:function(e,t,a){"use strict";var r=a(67294),n=a(12112),c=a(8266),s=(0,n.Z)(c.Z)({textAlign:"center",paddingBottom:"1em"});t.Z=function(e){var t=e.children;return r.createElement(s,null,t)}},45954:function(e,t,a){"use strict";var r,n=a(67294),c=a(43217),s=a(8266),i=(0,a(12112).Z)(s.Z)(((r={width:"100%",display:"flex",color:"black",background:"rgb(250,210,233)"}).background="radial-gradient(circle, rgba(244, 165, 210, 1), rgba(250, 210, 233, 1) 0%, rgba(244, 165, 210, 1))",r.justifyContent="center",r.alignItems="center",r["& h1"]={textAlign:"center"},r["& .flexStar"]={flexShrink:"0",margin:"0 .5em"},r["& .flexStar:nth-of-type(1)"]={transform:"rotate(25deg)"},r["& .flexStar:nth-of-type(2)"]={transform:"rotate(50deg)"},r["& .flexStar:nth-of-type(3)"]={transform:"rotate(55deg)"},r["& .flexStar:nth-of-type(4)"]={transform:"rotate(85deg)"},r["& .flexStar:nth-of-type(5)"]={transform:"rotate(55deg)"},r["& .flexStar:nth-of-type(6)"]={transform:"rotate(35deg)"},r["@media (max-width: 678px)"]={"& .flexStar":{display:"none"}},r));t.Z=function(e){var t=e.title;return n.createElement(i,null,n.createElement(c.S,{src:"../images/slimStarWhite.svg",alt:"",className:"flexStar",height:40,layout:"fixed",__imageData:a(90379)}),n.createElement(c.S,{src:"../images/slimStarWhite.svg",alt:"",className:"flexStar",height:50,layout:"fixed",__imageData:a(95424)}),n.createElement(c.S,{src:"../images/slimStarWhite.svg",alt:"",className:"flexStar",height:60,layout:"fixed",__imageData:a(61105)}),n.createElement("h1",{style:{display:"inline",padding:"0 .5em"}},t),n.createElement(c.S,{src:"../images/slimStarWhite.svg",alt:"",className:"flexStar",height:60,layout:"fixed",__imageData:a(61105)}),n.createElement(c.S,{src:"../images/slimStarWhite.svg",alt:"",className:"flexStar",height:50,layout:"fixed",__imageData:a(95424)}),n.createElement(c.S,{src:"../images/slimStarWhite.svg",alt:"",className:"flexStar",height:40,layout:"fixed",__imageData:a(90379)}))}},81712:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var r,n,c,s=a(67294),i=a(25444),o=a(92207),l=a(15583),u=a(86273),d=a(45954),f=a(66900),p=a(41788),m=a(92137),h=a(87757),g=a.n(h);r="sq0idp-OyXssltwNQblNk9NOxKJ4w",n="L4RPAVMCK1MD7",c="https://ejnd5apu72.execute-api.us-east-2.amazonaws.com/nwif-reg2-prod";function b(e){return y.apply(this,arguments)}function y(){return(y=(0,m.Z)(g().mark((function e(t){var a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.card();case 2:return a=e.sent,e.next=5,a.attach("#card-container");case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return e.paymentRequest({countryCode:"US",currencyCode:"USD",total:{amount:(t/100).toString(),label:"Total"}})}function S(e,t){return x.apply(this,arguments)}function x(){return(x=(0,m.Z)(g().mark((function e(t,a){var r,n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v(t,a),e.next=3,t.googlePay(r);case 3:return n=e.sent,e.next=6,n.attach("#google-pay-button");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,a){return E.apply(this,arguments)}function E(){return(E=(0,m.Z)(g().mark((function e(t,a,r){var s,i,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=JSON.stringify({locationId:n,sourceId:t,guid:a,amount:r}),e.next=3,fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:s});case 3:if(!(i=e.sent).ok){e.next=6;break}return e.abrupt("return",i.json());case 6:return e.next=8,i.text();case 8:throw o=e.sent,new Error(o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return W.apply(this,arguments)}function W(){return(W=(0,m.Z)(g().mark((function e(t){var a,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tokenize();case 2:if("OK"!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",a.token);case 7:throw r="Tokenization failed with status: "+a.status,a.errors&&(r+=" and errors: "+JSON.stringify(a.errors)),new Error(r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){var a=document.getElementById("payment-status-container"),r=document.getElementById("receipt-container");"SUCCESS"===e?(a.classList.remove("is-failure"),a.classList.add("is-success"),r.style.visibility="visible",r.style.visibility="visible",r.innerHTML="Thank you for purchasing a NWIF badge! Please save <a href="+t.payment.receiptUrl+' target="_blank">your receipt</a> before closing this page.<br /><br /><a href="https://discord.gg/h5yJbXgTgE" target="_blank">Join our Discord</a> and claim your role now!<br /><br />'):(a.classList.remove("is-success"),a.classList.add("is-failure")),a.style.visibility="visible"}function C(e){for(var t=0;t<e.length;t++)e[t].src=""}var N=function(e){function t(){return e.apply(this,arguments)||this}(0,p.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=(0,m.Z)(g().mark((function e(){var t,a,c,s,i,o,l,u,d;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(){return(u=(0,m.Z)(g().mark((function e(r,n){var c,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,d.disabled=!0,e.next=5,k(n);case 5:return c=e.sent,e.next=8,w(c,t,a);case 8:Z("SUCCESS",s=e.sent),console.debug("Payment Success",s);try{C(document.getElementsByTagName("iframe"))}finally{}e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),d.disabled=!1,Z("FAILURE"),console.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)},l=function(e,t){return u.apply(this,arguments)},window.Square){e.next=4;break}throw new Error("Square.js failed to load properly");case 4:t=this.props.guid,a=this.props.amount,e.prev=6,c=window.Square.payments(r,n),e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(6),(s=document.getElementById("payment-status-container")).className="missing-credentials",s.style.visibility="visible",e.abrupt("return");case 16:return e.prev=16,e.next=19,b(c);case 19:i=e.sent,e.next=26;break;case 22:return e.prev=22,e.t1=e.catch(16),console.error("Initializing Card failed",e.t1),e.abrupt("return");case 26:return e.prev=26,e.next=29,S(c,a);case 29:o=e.sent,e.next=35;break;case 32:e.prev=32,e.t2=e.catch(26),console.error("Initializing Google Pay failed",e.t2);case 35:(d=document.getElementById("card-button")).addEventListener("click",function(){var e=(0,m.Z)(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,l(t,i);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),void 0!==o&&document.getElementById("google-pay-button").addEventListener("click",function(){var e=(0,m.Z)(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t,o);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.applePay&&document.getElementById("apple-pay-button").addEventListener("click",function(){var e=(0,m.Z)(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t,this.applePay);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}());case 39:case"end":return e.stop()}}),e,this,[[6,10],[16,22],[26,32]])})));return function(){return e.apply(this,arguments)}}(),a.render=function(){return s.createElement("div",null,s.createElement("form",{id:"payment-form"},s.createElement("div",{id:"google-pay-button"}),s.createElement("div",{id:"card-container"}),s.createElement("button",{id:"card-button",type:"button"},"Pay $",this.props.amount/100)),s.createElement("div",{id:"payment-status-container"}),s.createElement("div",{id:"receipt-container"}))},t}(s.Component),_=function(e){var t=e.location,a=(0,s.useState)(null),r=a[0],n=a[1];(0,s.useEffect)((function(){new Promise((function(e,t){var a=document.createElement("script");a.src="https://web.squarecdn.com/v1/square.js",a.crossorigin="anonymous",a.onload=function(){e()},a.onerror=function(){t("Failed to load "+a.src)},document.getElementsByTagName("head")[0].appendChild(a)})).then((function(){n("SUCCESS")})).catch((function(){return n("ERROR")}))}),[]);var c=new URLSearchParams(t.search),p=c.get("guid"),m=c.get("amount"),h=c.get("tax"),g=c.get("badge_type");return s.createElement(o.Z,null,s.createElement(l.Z,{title:"Payment"}),s.createElement(d.Z,{title:"Payment"}),s.createElement(u.Z,{suppressHydrationWarning:!0},s.createElement(f.Z,null,s.createElement("p",null,"Finish purchasing your ",g," below."),s.createElement("p",null,"Total: $",(m-h)/100," ",h>0?s.createElement("span",null,"+ $",(h/100).toFixed(2)," tax"):null)),"ERROR"===r&&"Failed to load SquareSDK. Please refresh the page.","SUCCESS"===r&&s.createElement(N,{guid:p,amount:m}),s.createElement(f.Z,null,s.createElement("small",null,"If you encounter errors, please ",s.createElement(i.Link,{to:"/contact"},"contact us")," and provide reference ID ",p,"."),s.createElement("br",null),s.createElement("small",null,"Payment processing is provided by Square. NWIF never handles or stores your credit card details."))))}}}]);
//# sourceMappingURL=component---src-pages-payment-js-e714150b2e0ff0323f09.js.map